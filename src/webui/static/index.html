<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Mesos</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- styles -->
    <link href="/static/bootstrap/css/bootstrap.css" rel="stylesheet">
    <link href="/static/graph.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
      }
    </style>
    <link href="/static/bootstrap/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- fav and touch icons -->
    <link rel="shortcut icon" href="/static/bootstrap/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top" id="navbar">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand active" href="#">Mesos</a>
          <div class="nav-collapse">
            <ul class="nav">
              <li class="active"><a href="#">Home</a></li>
              <li><a href="#frameworks">Frameworks</a></li>
            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container" id="main_content"></div>

<script type="text/html" id="template-root">
  <div class="row">
    <div class="span3">
      <div class="well">
        <h2>Details</h2>
        <dl data-slot="details"></dl>
            
        <h2>Resources</h2>
        <table class="table table-condensed">
          <thead>
            <tr>
              <th></th>
              <th>CPUs</th>
              <th>Memory</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <th>Total</th>
              <td>?</td>
              <td>?</td>
            </tr>
            <tr>
              <th>Used</th>
              <td>?</td>
              <td>?</td>
            </tr>
            <tr>
              <th>Offered</th>
              <td>?</td>
              <td>?</td>
            </tr>
            <tr>
              <th>Idle</th>
              <td>?</td>
              <td>?</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
        
    <div class="span9">
      <button class="btn btn-mini" data-toggle="collapse" data-target="#graph_collapsable">Show/hide graph</button>
      <div class="collapse in" id="graph_collapsable">
        <div class="well" id="graph"></div>
      </div>
      <h2 id="frameworks">Frameworks</h2>
      <table class="table table-striped table-bordered table-condensed">
        <thead>
          <tr>
            <th>ID</th>
            <th>User</th>
            <th>Name</th>
            <th>Running Tasks</th>
            <th>CPUs</th>
            <th>Mem</th>
            <th>Max Share</th>
            <th>Registered</th>
            <th>Reregistered</th>
          </tr>
        </thead>
        <tbody data-slot="frameworks">
          <tr><td style="text-align:center" colspan="9"><em>(No data)</em></td></tr>
        </tbody>
      </table>

          
      <hr>
          
      <h2 id="slaves">Slaves</h2>
      <table class="table table-striped table-bordered table-condensed">
        <thead>
          <tr>
            <th>Hostname</th>
            <th>CPUs</th>
            <th>Mem</th>
            <th>Connected at</th>
            <th>ID</th>
          </tr>
        </thead>
        <tbody data-slot="slaves"></tbody>
      </table>
          
      <h2 id="offers">Resource offers</h2>
      <div class="alert">
        <button class="close" data-dismiss="alert">Ã—</button>
        <strong>T.B.D.</strong> What will this data look like?
      </div>
          
      <hr>
          
      <h2 id="history">History</h2>
      <table class="table table-striped table-bordered table-condensed">
        <thead>
          <tr>
            <th>ID</th>
            <th>User</th>
            <th>Name</th>
            <th>Connected at</th>
            <th>Disconnected at</th>
          </tr>
        </thead>
        <tbody data-slot="history"></tbody>
      </table>

    </div>
  </div>
</script>


<script type="text/html" id="partial-details">
  <dt>Server:</dt>
  <dd><%= state.pid.split("@")[1] %></dd>
  <dt>Built:</dt>
  <dd><%= state.build_date %> (local?)</dd>
  <dt>Started:</dt>
  <dd><%= format_unix_timestamp_reasonably(state.start_time) %> (UTC)</dd>
  <dt>ID:</dt>
  <dd><%= state.id %></dd>
</script>

<script type="text/html" id="partial-frameworks">
<% _.each(state['frameworks'], function(framework) { %>
  <tr>
    <td><%= framework.id %></td>
    <td><%= framework.user %></td>
    <% var path = '#/frameworks/' + framework.id %>
    <td><a href="<%= path %>"><%= framework.name %></a></td>
    <td><%= framework.tasks.length %></td>
    <td><%= framework.resources.cpus %></td>
    <td><%= framework.resources.mem %></td>
    <td>TODO</td>
    <% var registered_time = new Date(framework.registered_time * 1000);
       var reregistered_time = new Date(framework.reregistered_time * 1000);
    %>
    <td><%= registered_time.toLocaleString() %></td>
    <td><%= registered_time.getTime() == reregistered_time.getTime() ? '' : reregistered_time.toLocaleString() %></td>
  </tr>
<% }); %>
</script>

<script type="text/html" id="partial-slaves">
<% _.each(state.slaves, function(slave) { %>
  <tr>
    <td>
      <a href="http://<%= slave.webui_hostname %>:<%= slave.webui_port %>/">
        <%= slave.hostname %>
      </a>
    </td>
    <td><%= slave.resources.cpus %></td>
    <td><%= slave.resources.mem %></td>
    <td><%= format_unix_timestamp_reasonably(slave.registered_time) %></td>
    <td><%= slave.id %></td>
  </tr>
<% }); %>
</script>

<script type="text/html" id="partial-history">
<% _.each(state.completed_frameworks, function(history) { %>
  <tr>
    <td><%= history.id %></td>
    <td><%= history.user %></td>
    <td><%= history.name %></td>
    <% var registered_time = new Date(history.registered_time * 1000);
       var reregistered_time = new Date(history.reregistered_time * 1000);
    %>
    <td><%= registered_time.toLocaleString() %></td>
    <td><%= registered_time.getTime() == reregistered_time.getTime() ? '' : reregistered_time.toLocaleString() %></td>
  </tr>
<% }); %>
</script>



    <!-- External libraries -->
    <script src="/static/bootstrap/js/jquery.js"></script>
    <script src="/static/bootstrap/js/bootstrap-transition.js"></script>
    <script src="/static/bootstrap/js/bootstrap-alert.js"></script>
    <script src="/static/bootstrap/js/bootstrap-modal.js"></script>
    <script src="/static/bootstrap/js/bootstrap-dropdown.js"></script>
    <script src="/static/bootstrap/js/bootstrap-scrollspy.js"></script>
    <script src="/static/bootstrap/js/bootstrap-tab.js"></script>
    <script src="/static/bootstrap/js/bootstrap-tooltip.js"></script>
    <script src="/static/bootstrap/js/bootstrap-popover.js"></script>
    <script src="/static/bootstrap/js/bootstrap-button.js"></script>
    <script src="/static/bootstrap/js/bootstrap-collapse.js"></script>
    <script src="/static/bootstrap/js/bootstrap-carousel.js"></script>
    <script src="/static/bootstrap/js/bootstrap-typeahead.js"></script>
    <script src="/static/underscore-min.js"></script>
    <script src="/static/backbone-min.js"></script>
    <script src="/static/d3.v2.js"></script>
    <script src="/static/cubism.v1.js"></script>

    <!-- our JS -->
    <script src="/static/script.js"></script>
    <script src="/static/graph.js"></script>
  </body>
</html>
